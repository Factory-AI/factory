---
title: Identity, SSO, and SCIM
description: Enterprise identity management with SSO/SAML authentication and Directory Sync/SCIM provisioning
---

Factory provides comprehensive enterprise identity management through Single Sign-On (SSO) using SAML/OIDC protocols and automated user provisioning via Directory Sync (SCIM). This guide covers how these systems work together to manage user identities, authentication, and access control.

## Overview

Factory uses **WorkOS** to handle enterprise identity management, supporting:

- **SSO/SAML**: Authenticate users through your Identity Provider (IdP)
- **Directory Sync/SCIM**: Automatically provision and manage users from your directory
- **Just-In-Time (JIT) Provisioning**: Create users on first login via SSO
- **Group-based Access Control**: Manage permissions through directory groups

## How It Works

### Authentication with SSO

```mermaid
graph LR
    A[User clicks<br/>Sign in with SSO] --> B[Redirected to<br/>your IdP]
    B --> C[Enter corporate<br/>credentials]
    C --> D[Authenticated<br/>to Factory]

    style A fill:#e1f5fe
    style D fill:#c8e6c9
```

When SSO is enabled:

1. Users click "Sign in with SSO" instead of entering a password
2. They're redirected to your corporate identity provider (Okta, Azure AD, etc.)
3. After authenticating with their corporate credentials, they're logged into Factory
4. First-time users are automatically created if JIT provisioning is enabled

### User Provisioning with Directory Sync

```mermaid
graph TD
    A[Add user to<br/>directory group] --> B[User automatically<br/>created in Factory]
    C[Update user info<br/>in directory] --> D[Profile updated<br/>in Factory]
    E[Remove user from<br/>directory] --> F[Access revoked<br/>in Factory]

    style A fill:#e8f5e9
    style C fill:#fff3e0
    style E fill:#ffebee
```

When Directory Sync (SCIM) is enabled:

- **Adding users** to your directory automatically creates them in Factory
- **Updating** user information syncs to Factory in real-time
- **Removing users** from your directory revokes their Factory access
- **Group changes** automatically update user permissions

### Data Priority

When users exist from multiple sources (SSO, Directory Sync, manual invite), Factory follows this priority:

1. **Directory Sync data always wins** - Information from your directory overwrites other sources
2. **Users are matched by email** - We find existing users by email address (case-insensitive)
3. **Custom data is preserved** - Factory-specific settings that don't exist in your directory are kept
4. **Soft deletes** - Removed users are deactivated, not deleted, preserving their work history

## Prerequisites

Before setting up SSO and SCIM:

- You are on a plan that includes **enterprise SSO support**
- You have **admin access** to your IdP (or a partner in IT who does)
- You have a **Factory admin** who can coordinate configuration on the Factory side
- Contact your Factory representative to initiate the setup process

## Setup Process Overview

### Initial Setup Flow

<Steps>
  <Step title="Contact Factory">
    Request SSO/SCIM setup from your Factory account representative or via
    support@factory.ai
  </Step>

  <Step title="Receive Setup Link">
    You'll receive a secure setup link (valid for 7 days) to configure your
    identity provider
  </Step>

  <Step title="Select Provider">
    Choose your identity provider from the supported list or select "Generic
    SAML/OIDC"
  </Step>

  <Step title="Configure SSO">
    Follow provider-specific instructions to set up SAML or OIDC authentication
  </Step>

  <Step title="Enable Directory Sync (Optional)">
    Configure SCIM provisioning for automated user management
  </Step>

  <Step title="Test & Verify">
    Test with pilot users before rolling out to entire organization
  </Step>
</Steps>

### Setup Options

During setup, you'll configure:

<AccordionGroup>
  <Accordion title="Connection Type">
    - **SAML 2.0** - Recommended for enterprise IdPs - **OIDC** - Modern
    protocol with better mobile support - **Both** - Some providers support dual
    protocols
  </Accordion>

  <Accordion title="User Provisioning">
    - **Just-In-Time (JIT)** - Users created on first login - **Directory Sync
    (SCIM)** - Automated provisioning from directory - **Manual** - Admin
    invites users individually - **Hybrid** - Combination of methods
  </Accordion>

  <Accordion title="Role Mapping">
    - **Attribute-based** - Roles from SAML/OIDC claims - **Group-based** -
    Roles from directory groups - **Default role** - All users get same initial
    role - **Custom mapping** - Advanced rules engine
  </Accordion>

  <Accordion title="MFA Requirements">
    - **IdP-enforced** - MFA handled by your IdP - **Factory-enforced** -
    Additional MFA layer - **Conditional** - Based on user role or location -
    **Optional** - User choice
  </Accordion>
</AccordionGroup>

## Single Sign-On (SSO)

### How SSO Works

1. User attempts to log in to Factory
2. Redirected to your Identity Provider (IdP)
3. User authenticates with corporate credentials
4. IdP sends SAML assertion back to Factory
5. User is authenticated and provisioned if needed (see JIT below)

### Supported SSO Providers

Factory supports integration with all major identity providers through WorkOS. Select your provider during setup:

#### Popular SSO Providers

<Tabs>
  <Tab title="SAML Providers">
    - **Okta** - Full SAML 2.0 and SCIM support - **Microsoft Azure AD / Entra
    ID** - SAML and OIDC with SCIM - **Google Workspace** - SAML 2.0 with Google
    Groups mapping - **OneLogin** - SAML 2.0 and SCIM provisioning - **Ping
    Identity / PingOne** - Enterprise SAML federation - **JumpCloud** - SAML
    with cross-directory support - **CyberArk** - SAML with privileged access
    management - **Duo (Cisco)** - SAML with MFA integration
  </Tab>

<Tab title="OIDC Providers">
  - **Auth0** - Universal OIDC with custom rules - **Keycloak** - Open-source
  OIDC provider - **AWS Cognito** - OIDC with AWS integration - **Firebase
  Auth** - Google's OIDC implementation - **FusionAuth** - Developer-focused
  OIDC
</Tab>

<Tab title="Enterprise Platforms">
  - **Salesforce Identity** - SAML for Salesforce orgs - **VMware Workspace
  ONE** - Enterprise mobility + SAML - **IBM Security Verify** - Enterprise
  SAML/OIDC - **Oracle Identity Cloud** - Oracle ecosystem integration - **RSA
  SecurID** - SAML with token-based MFA
</Tab>

  <Tab title="Generic Options">
    - **Generic SAML 2.0** - Any SAML-compliant IdP
    - **Generic OIDC** - Any OpenID Connect provider
    - **ADFS** - Microsoft Active Directory Federation Services
    - **Shibboleth** - Academic/research institution SSO
    - **SimpleSAMLphp** - Open-source SAML implementation
  </Tab>
</Tabs>

#### Magic Link Alternative

If your organization doesn't use SSO, Factory also supports:

- **Magic Link Authentication** - Passwordless email-based login
- Can be used alongside SSO for external collaborators

### Just-In-Time (JIT) Provisioning

When SSO is enabled with JIT provisioning:

- Users are automatically created on first successful login
- User profile is populated from SAML attributes
- Organization membership is created automatically
- No manual user invitation required

<Warning>
  JIT provisioning can conflict with Directory Sync. See [Conflict
  Resolution](#conflict-resolution) for best practices.
</Warning>

## SSO Configuration

### What You Need to Prepare

Before starting SSO setup:

1. **Admin access** to your identity provider
2. **Test users** - Create a pilot group (e.g., `factory-pilot-users`) to test before organization-wide rollout
3. **Group strategy** - Decide which IdP groups map to Factory roles:
   - Admin groups (e.g., `factory-admins`)
   - Member groups (e.g., `factory-developers`)
   - Read-only groups (e.g., `factory-viewers`)

### How Setup Works

<Info>
**WorkOS handles the technical configuration automatically.** When you receive your setup link from Factory:

1. Click the link and select your identity provider
2. Follow the guided setup wizard specific to your IdP
3. WorkOS automatically configures all SAML/OIDC settings
4. Test the connection with your pilot group
5. Roll out to your organization

You don't need to manually configure URLs, certificates, or technical parameters - WorkOS handles this based on your provider.

</Info>

### Group-to-Role Mapping

During setup, you'll configure how your IdP groups map to Factory roles:

| Your IdP Group        | Maps to Factory Role | Permissions                               |
| --------------------- | -------------------- | ----------------------------------------- |
| `factory-admins`      | Admin                | Full access, manage users and settings    |
| `factory-developers`  | Member               | Create and edit content, use all features |
| `factory-viewers`     | Viewer               | Read-only access                          |
| `factory-contractors` | Member               | Same as developers, but easier to track   |

<Tip>
  Use descriptive group names in your IdP to make management easier. Groups like
  `factory-frontend-team` or `factory-qa-engineers` help you organize
  permissions by team.
</Tip>

### Testing Your Integration

After configuration, test with your pilot group:

1. Have a test user sign in via SSO from the Factory login page
2. Initiate login from the Factory sign‑in page using “Sign in with SSO” / your IdP button.
3. Verify that:
   - The user is redirected to the IdP, authenticates, and returns to Factory.
   - The user lands in the correct org/team with the expected role.

If anything fails, check the IdP’s logs and Factory’s error message; most issues are due to mismatched URLs, certificates, or attribute mappings.

---

## Directory Sync (SCIM) Provisioning

SSO controls **how users authenticate**; SCIM controls **which users and groups exist** in Factory.

With SCIM enabled:

- New employees in relevant IdP groups get access to Factory automatically.
- Users removed from those groups lose access automatically.
- Group membership changes propagate into Factory without manual updates.

### Supported Directory Sync Providers

Factory supports SCIM 2.0 provisioning from these directory providers:

<Tabs>
  <Tab title="Full SCIM Support">
    **Providers with complete SCIM 2.0 implementation:**
    
    - **Okta** - Real-time provisioning with Okta Universal Directory
    - **Microsoft Azure AD / Entra ID** - Enterprise directory sync
    - **OneLogin** - User and group provisioning
    - **JumpCloud** - Cross-platform directory services
    - **Google Workspace** - Google Groups and organizational units
    - **PingOne** - PingDirectory integration
    - **CyberArk** - Privileged access provisioning
  </Tab>

<Tab title="Partial Support">
    **Providers with limited SCIM features:**
    
    - **Rippling** - HR-driven provisioning
    - **BambooHR** - Employee lifecycle management
    - **Workday** - HCM-based provisioning
    - **AWS SSO** - AWS Identity Center provisioning
    
    Note: These providers may require additional configuration or have limitations on group management.
  </Tab>
  
  <Tab title="Custom Integration">
    **Build your own SCIM integration:**
    
    - **Generic SCIM 2.0** - Any SCIM-compliant directory
    - **Custom SCIM Endpoint** - Your internal user directory
    - **LDAP Bridge** - Connect legacy LDAP/AD via SCIM gateway
    - **CSV Upload** - Manual bulk provisioning (not real-time)
  </Tab>
</Tabs>

### SCIM Features by Provider

| Provider            | Users | Groups  | Real-time | Nested Groups | Custom Attributes |
| ------------------- | ----- | ------- | --------- | ------------- | ----------------- |
| Okta                | ✅    | ✅      | ✅        | ✅            | ✅                |
| Azure AD / Entra ID | ✅    | ✅      | ✅        | ✅            | ✅                |
| Google Workspace    | ✅    | ✅      | ✅        | ❌            | Partial           |
| OneLogin            | ✅    | ✅      | ✅        | ❌            | ✅                |
| JumpCloud           | ✅    | ✅      | ✅        | ✅            | ✅                |
| Rippling            | ✅    | Partial | ✅        | ❌            | Partial           |
| Generic SCIM        | ✅    | ✅      | Varies    | Varies        | Varies            |

### Configuring Directory Sync

#### What You Need to Prepare

Before enabling SCIM:

1. **Decide which groups to sync** - Not all IdP groups need Factory access
2. **Plan your group structure** - Consider teams, roles, and access levels
3. **Identify service accounts** - Separate human users from CI/CD accounts
4. **Review existing users** - Understand how they'll be affected when SCIM takes over

Treat the SCIM token as a secret; store it only in your IdP’s application configuration.

#### How SCIM Setup Works

<Info>
**WorkOS handles the SCIM configuration automatically.** When you receive your setup link from Factory:

1. WorkOS provides a SCIM endpoint URL and bearer token
2. You enter these in your IdP's SCIM configuration
3. Select which groups to sync (e.g., only `factory-*` groups)
4. WorkOS automatically handles:
   - User attribute mapping (email, name, etc.)
   - Group synchronization
   - Real-time updates via webhooks
   - Conflict resolution with existing users

You don't need to configure attribute mappings or technical settings - WorkOS manages this based on SCIM 2.0 standards.

</Info>

#### Configuring SCIM in Your IdP

In your IdP’s SCIM settings for the Factory application:

1. Enable **automatic provisioning**.
2. Paste the **SCIM base URL** and **SCIM token** from Factory.
3. Choose which users and groups to sync (for example, only `factory-*` groups).
4. Configure attribute mappings if required (for example, `userName` → email, `displayName` → name).

Once enabled, your IdP will start pushing users and groups to Factory and keep them synchronized.

#### What Happens When SCIM is Enabled

With SCIM in place, group management should happen **only in your IdP**.

Use group naming and mapping rules such as:

- `factory-org-owners` → Factory org Owners.
- `factory-org-admins` → Factory org Admins.
- `factory-users` → Factory Members.
- `factory-ci-bots` → machine/service accounts with restricted permissions.

This keeps RBAC definitions in one place (your IdP) and lets you audit them alongside other enterprise apps.

## Data Management and Merging

### User Identity Sources

Factory users can originate from multiple sources:

- **Directory Sync**: Automatically provisioned via SCIM
- **SSO JIT**: Created on first SSO login
- **Manual Invitation**: Added by administrators
- **API**: Created programmatically

### Merging Strategy

When users exist from multiple sources, Factory follows these rules:

1. **Directory data takes precedence** - SCIM attributes override all other sources
2. **Email-based matching** - Users matched by email (case-insensitive)
3. **Soft deletes only** - Users deactivated, not deleted, preserving audit trails
4. **Profile preservation** - Non-directory fields retained during updates

## Conflict Resolution

### SSO vs Directory Sync

When both are enabled, potential conflicts include:

**Scenario**: User logs in via SSO before directory provisions them  
**Resolution**: Directory sync merges with SSO user on next sync

**Best Practice**: Choose one primary method:

- **Directory-first**: Disable JIT, require directory provisioning
- **SSO-first**: Use JIT for creation, directory for updates

### Email Case Sensitivity

All email matching is case-insensitive:

- `John.Doe@company.com` = `john.doe@company.com`
- Prevents duplicate users from case variations
- Emails normalized to lowercase for comparison

---

## Troubleshooting & best practices

Common issues and recommendations:

- **Login loops or failures**

  - Verify ACS / redirect URLs exactly match what Factory provided.
  - Confirm certificates or signing keys have not expired or been rotated without updating Factory.

- **User lands in wrong org or role**

  - Check group memberships and mapping rules.
  - Ensure the intended groups are included in SAML assertions or ID tokens.

- **Provisioning not working**
  - Confirm SCIM is enabled in both Factory and your IdP.
  - Check SCIM logs in your IdP for errors (invalid token, URL, or schema).

Best practices:

- Keep a **small pilot group** for initial rollout and future changes.
- Use **clear, prefix‑based group names** (for example, `factory-*`) to keep IdP configuration maintainable.
- Manage all role changes and access reviews in your IdP to leverage existing governance processes.

Once SSO and SCIM are in place, the **Identity & Access Management** overview explains how these identities are enforced at runtime for Droids.
