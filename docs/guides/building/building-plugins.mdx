---
title: Building Plugins
description: Create shareable plugins with skills, commands, hooks, and tools for Droid.
keywords: ['plugins', 'building', 'development', 'skills', 'commands', 'hooks', 'marketplace', 'distribution']
---

This guide walks you through creating plugins for Droid. Plugins bundle skills, commands, hooks, and tools into shareable packages that work across projects and teams.

## Quick start

<Steps>
  <Step title="Create the plugin directory">
    ```bash
    mkdir -p my-plugin/.factory-plugin
    ```
  </Step>
  <Step title="Create the manifest">
    Create `my-plugin/.factory-plugin/plugin.json`:
    ```json
    {
      "name": "my-plugin",
      "description": "A helpful plugin description",
      "version": "1.0.0"
    }
    ```
  </Step>
  <Step title="Add a command">
    Create `my-plugin/commands/hello.md`:
    ```markdown
    ---
    description: Greet the user with a friendly message
    ---

    Greet the user warmly and ask how you can help them today.
    ```
  </Step>
  <Step title="Test your plugin">
    ```bash
    droid --plugin-dir ./my-plugin
    ```
    Then run `/my-plugin:hello` to test.
  </Step>
</Steps>

## Plugin manifest

The manifest file at `.factory-plugin/plugin.json` defines your plugin's metadata:

```json
{
  "name": "my-plugin",
  "description": "What this plugin does",
  "version": "1.0.0",
  "author": {
    "name": "Your Name",
    "email": "you@example.com"
  },
  "homepage": "https://github.com/you/my-plugin",
  "repository": "https://github.com/you/my-plugin",
  "license": "MIT"
}
```

### Required fields

| Field | Description |
|-------|-------------|
| `name` | Unique identifier. Lowercase letters, digits, hyphens. Used as command namespace. |
| `description` | Short description shown in plugin manager. |
| `version` | Semantic version (e.g., `1.0.0`). |

### Optional fields

| Field | Description |
|-------|-------------|
| `author` | Object with `name` and optional `email`. |
| `homepage` | URL for plugin documentation. |
| `repository` | Git repository URL. |
| `license` | License identifier (e.g., `MIT`, `Apache-2.0`). |

## Adding skills

Skills are model-invoked capabilities. Create them in the `skills/` directory:

```
my-plugin/
└── skills/
    └── code-review/
        └── SKILL.md
```

### Skill format

```markdown
---
name: code-review
description: Reviews code for best practices and potential issues. Use when reviewing code, checking PRs, or analyzing code quality.
---

When reviewing code, check for:
1. Code organization and structure
2. Error handling
3. Security concerns
4. Test coverage

Provide specific, actionable feedback with line references.
```

### Skill frontmatter

| Field | Required | Description |
|-------|----------|-------------|
| `name` | Yes | Unique identifier for the skill |
| `description` | Yes | When to use this skill (helps model decide when to invoke) |
| `disable-model-invocation` | No | Set `true` to make it user-only |
| `allowed-tools` | No | Restrict which tools the skill can use |

## Adding commands

Commands are user-invoked via slash syntax. Create them in the `commands/` directory:

```
my-plugin/
└── commands/
    └── review-pr.md
```

### Command format

```markdown
---
description: Review the current PR for issues
disable-model-invocation: true
---

# Review PR Command

Review the current pull request. Check for:
1. Code correctness and logic errors
2. Test coverage
3. Documentation updates
4. Breaking changes

If the user provides arguments: $ARGUMENTS

Use them to focus on specific areas of the review.
```

Commands are namespaced by plugin name. A command at `commands/review-pr.md` in a plugin named `my-plugin` becomes `/my-plugin:review-pr`.

### Command arguments

Use `$ARGUMENTS` to capture user input:

```markdown
---
description: Greet a user by name
---

Greet the user named "$ARGUMENTS" warmly.
```

Usage: `/my-plugin:greet Alice`

## Adding hooks

Hooks run automatically on events. Define them in `hooks/hooks.json`:

```
my-plugin/
└── hooks/
    └── hooks.json
```

### Hooks format

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Edit|Create",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'File being modified: $FILE'"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "npm run lint:fix $FILE"
          }
        ]
      }
    ]
  }
}
```

### Hook events

| Event | Trigger | Common uses |
|-------|---------|-------------|
| `PreToolUse` | Before a tool runs | Validation, security checks |
| `PostToolUse` | After a tool completes | Auto-formatting, linting |
| `SessionStart` | When a session begins | Context injection, setup |
| `Stop` | When session ends | Cleanup, notifications |
| `UserPromptSubmit` | Before user prompt is processed | Input validation |

### Hook types

**Command hooks** run shell commands:

```json
{
  "type": "command",
  "command": "npm run lint:fix $FILE"
}
```

**Script hooks** run scripts with more context:

```json
{
  "type": "script",
  "script": "./hooks/validate.sh"
}
```

## Adding agents

Define specialized subagents in the `agents/` directory:

```
my-plugin/
└── agents/
    └── security-reviewer.md
```

### Agent format

```markdown
---
name: security-reviewer
description: Reviews code for security vulnerabilities
model: inherit
tools: ["Read", "Grep", "Glob"]
---

You are a security expert. Review the code for:

1. Injection vulnerabilities (SQL, command, XSS)
2. Authentication/authorization issues
3. Sensitive data exposure
4. Insecure cryptography
5. Security misconfigurations

Report findings with severity levels and remediation steps.
```

See [Custom Droids](/cli/configuration/custom-droids) for full agent configuration options.

## Adding MCP servers

Configure MCP servers in `.mcp.json` at the plugin root:

```json
{
  "mcpServers": {
    "my-api": {
      "command": "npx",
      "args": ["-y", "@example/mcp-server"],
      "env": {
        "API_KEY": "${MY_API_KEY}"
      }
    }
  }
}
```

## Testing plugins

### Local testing

Use `--plugin-dir` to test during development:

```bash
droid --plugin-dir ./my-plugin
```

Test multiple plugins:

```bash
droid --plugin-dir ./plugin-one --plugin-dir ./plugin-two
```

### Validation checklist

Before sharing your plugin:

- [ ] Manifest has required fields (`name`, `description`, `version`)
- [ ] All skills have `name` and `description` in frontmatter
- [ ] Commands work with and without arguments
- [ ] Hooks don't block or slow down normal operations
- [ ] No hardcoded paths or machine-specific config
- [ ] README documents all commands and features

## Distributing plugins

### Creating a marketplace

A marketplace is a Git repository with a manifest listing available plugins:

```
my-marketplace/
├── .factory-plugin/
│   └── marketplace.json
├── plugin-one/
│   └── .factory-plugin/
│       └── plugin.json
└── plugin-two/
    └── .factory-plugin/
        └── plugin.json
```

### Marketplace manifest

Create `.factory-plugin/marketplace.json`:

```json
{
  "name": "my-marketplace",
  "description": "A collection of useful plugins",
  "plugins": [
    {
      "name": "plugin-one",
      "path": "./plugin-one"
    },
    {
      "name": "plugin-two",
      "path": "./plugin-two"
    }
  ]
}
```

### Version management

Use semantic versioning in your plugin manifest:

- **Major** (1.0.0 → 2.0.0): Breaking changes
- **Minor** (1.0.0 → 1.1.0): New features, backward compatible
- **Patch** (1.0.0 → 1.0.1): Bug fixes

## Best practices

<AccordionGroup>
  <Accordion title="Keep plugins focused">
    Design plugins around a single purpose or workflow. Prefer several small plugins over one monolithic plugin that does everything.
  </Accordion>
  
  <Accordion title="Document thoroughly">
    Include a README with:
    - What the plugin does
    - Installation instructions
    - All available commands and their usage
    - Configuration options
    - Examples
  </Accordion>
  
  <Accordion title="Use semantic versioning">
    Follow semver conventions so users know when updates might break their workflows.
  </Accordion>
  
  <Accordion title="Test across environments">
    Ensure your plugin works on macOS, Linux, and Windows if applicable. Use portable shell commands and avoid platform-specific paths.
  </Accordion>
  
  <Accordion title="Handle errors gracefully">
    Hooks and scripts should fail gracefully without blocking the user. Log errors but don't crash sessions.
  </Accordion>
  
  <Accordion title="Respect user privacy">
    Don't collect telemetry or send data without explicit consent. Document any network requests your plugin makes.
  </Accordion>
</AccordionGroup>

## Example: Complete plugin

Here's a complete example of a code review plugin:

```
code-review-plugin/
├── .factory-plugin/
│   └── plugin.json
├── commands/
│   └── review.md
├── skills/
│   └── review-patterns/
│       └── SKILL.md
├── agents/
│   └── reviewer.md
├── hooks/
│   └── hooks.json
└── README.md
```

**`.factory-plugin/plugin.json`:**
```json
{
  "name": "code-review",
  "description": "Automated code review with multiple specialized reviewers",
  "version": "1.0.0",
  "author": { "name": "Your Team" }
}
```

**`commands/review.md`:**
```markdown
---
description: Run comprehensive code review on staged changes
---

Review the staged git changes using the review-patterns skill.
Focus on: $ARGUMENTS

If no focus area specified, perform a general review.
```

**`skills/review-patterns/SKILL.md`:**
```markdown
---
name: review-patterns
description: Use when reviewing code to check for common issues and best practices.
---

Check code for:
- Logic errors and edge cases
- Error handling completeness
- Security vulnerabilities
- Performance concerns
- Test coverage gaps
```

**`agents/reviewer.md`:**
```markdown
---
name: reviewer
description: Specialized code reviewer subagent
model: inherit
tools: read-only
---

You are a senior code reviewer. Analyze the provided code and report:

Summary: <one-line assessment>
Issues:
- <severity> <description>
Suggestions:
- <improvement>
```

## Next steps

<CardGroup cols={2}>
  <Card title="Plugins overview" href="/cli/configuration/plugins" icon="puzzle-piece">
    Learn about installing and managing plugins.
  </Card>
  <Card title="Skills" href="/cli/configuration/skills" icon="wand-magic-sparkles">
    Deep dive into creating powerful skills.
  </Card>
  <Card title="Hooks reference" href="/reference/hooks-reference" icon="bolt">
    Complete reference for hook events and configuration.
  </Card>
  <Card title="Custom Droids" href="/cli/configuration/custom-droids" icon="robot">
    Create specialized subagents for your plugins.
  </Card>
</CardGroup>
